(function(e){e.fn.search=function(t){function s(n){var r=[];e.each($list_el.find("div"),function(){r.push(e(this).parents("."+t.items))});u(r,n)}function o(n){var r=e.trim(n).toLowerCase();var i=[];e.each($search_el,function(n,s){var o=e(this);if(o.text().toLowerCase().indexOf(r)>=0){i.push(o.parents("."+t.items))}});u(i,$sortOrder)}function u(t,n){t.sort(function(t,r){var i=e(t).text().toLowerCase();var s=e(r).text().toLowerCase();if(n==="asc"){if(i<s){return-1}else if(i>s){return 1}else{return 0}}else{if(i<s){return 1}else if(i>s){return-1}else{return 0}}});$list_el.html("");e.each(t,function(){$list_el.append(e(this))})}var n=e(this);if(typeof t==="undefined"||typeof t.values==="undefined"||typeof t.items==="undefined"||typeof t.list==="undefined")return;$search_input=n.find("input.search");$search_el=e("."+t.values);$list_el=e("."+t.list);sortBtnWidth=0;if(typeof t.sortOrder==="undefined")$sortOrder="asc";else $sortOrder=t.sortOrder;if(typeof t.sort!=="undefined"&&t.sort===true){$search_input.after('<button id="sort-list" class="btn btn-default glyphicon glyphicon-sort-by-alphabet asc">&nbsp;Sort</button>');var r=e("#sort-list");r.css({"margin-left":"10px"});sortBtnWidth=r.outerWidth(true)+13;$search_input.css({display:"inline",width:"calc(100% - "+sortBtnWidth+"px)","padding-right":"32px"});r.click(function(){var t=e(this);var n;if(t.hasClass("asc")){t.removeClass("glyphicon-sort-by-alphabet asc").addClass("glyphicon-sort-by-alphabet-alt desc");n="desc"}else{t.removeClass("glyphicon-sort-by-alphabet-alt desc").addClass("glyphicon-sort-by-alphabet asc");n="asc"}s(n)})}if(typeof t.clearer!=="undefined"&&t.clearer===true){$search_input.after('<span id="searchclear" class="glyphicon glyphicon-remove-circle"></span>');var i=e("#searchclear");i.css({display:"none",position:"absolute","z-index":2,"line-height":"34px",right:sortBtnWidth+10+"px"});$search_input.keyup(function(){var t=e(this);if(Boolean(t.val()))i.show();else i.hide()});i.hide($search_input.val());i.click(function(){$search_input.val("").focus();$search_input.change();e(this).hide()})}s("asc");$search_input.keyup(function(){o(e(this).val())});$search_input.change(function(){o(e(this).val())})}})(jQuery)
